### コーディングルールの書き方（要素別サマリー）

| 要素 | 記述形式（抜粋） | 目的・注意点 |
|---|---|---|
| ルールファイルの基本形 | `＊コード名`（次行に条件）／必要に応じて3行目に`# メモ` | 1コード＝最大3行ブロック。テキストエディタで作成可。 |
| 単語（基本） | `逮捕` | 活用語は**基本形**で指定。 |
| 品詞指定 | `米-->名詞 C` | `抽出語-->品詞`。記号前後に**スペースを入れない**。 |
| 活用形指定 | `買う->未然形` | `抽出語->活用形`。品詞と併用可：`語-->品詞->活用形`。 |
| 表層形（活用形の表記指定） | `買う=>買わ` | `抽出語=>表屡形`。活用形指定との**同時併用不可**。 |
| フレーズ（連接） | `卒業＋論文` | 語の**連続**出現を指定。`+`の前後にスペース**不可**。 |
| 近接 | `near(先生-奥さん)[3]` | 既定は前後**10語**。`[3]`で窓幅、`[b]`同一文、`[d]`同一段落等オプション。 |
| 語順 | `seq(お嬢さん-頬)` | 語Aの後に近くで語Bが出る。近接のオプションと同様に扱う。 |
| 出現回数（算術） | `メール == 2`／`メール + メッセージ + ＤＭ >= 2` | `+ - * / > < >= <= ==`が使用可。演算子の**前後は半角スペース必須**。 |
| 文書長 | `lw <= 10`（語数）／`lc`（文字数） | `lw`＝語数，`lc`＝文字数（全角/半角とも1字）。 |
| 文字列リテラル | `'けれどさ，'` | 抽出語ではなく**テキストの生文字列**で指定。複数文またぎは不可。 |
| 外部変数 | `<>性別-->男性` | CSV等で読み込んだ外部変数に基づく条件。スペース**不可**。 |
| 見出し・文書ID | `<>見出し 1-->２００４年`／`No. == 5` | H1見出し値や文書番号で絞り込み。 |
| 論理演算 | `` `|` `` (or), `` `&` `` (and), `` `!` `` (not), `` `|!` ``, `` `&!` `` | 代替文字列 `or` / `and` / `not` も可。演算子・括弧の**前後に半角スペース必須**。 |
| 既定コードの再利用 | `<＊教育関係> & 交流` | 同一ファイル上で**上位に定義したコード名**を`<>`で再利用。 |
| 半角/全角の原則 | 演算子や`-->`/`->`/`<>`は**半角**で。 | 全角許容は先頭の全角`＊`（コード名）だけ。 |
| スペースの原則 | （例）`語 ␣ & ␣ 語` ／ `near(… )`は直前直後**無スペース** | **算術・論理演算子とその括弧のみ**前後に半角スペース必須。他の記号の前後は**入れない**。 |
| 可読性（改行・インデント） | 長い条件は**改行・インデント**で整形 | 複雑な条件は分割して読みやすく。 |

---

### 補足ノート（要点）

- `!`は**条件先頭**でのみ単独使用可（それ以外は`&!`/`|!`を使用）。  
- `near`の既定は**前後10語**／`[b]`同一文、`[d]`同一段落、`[0]`距離チェック無効（ただし`&`併用のほうが読みやすい）。  
- 同じ語を複数回含む`near(先生-先生-奥さん)`のような指定は**不可**。  
- 英語データで抽出語として`and`等を使う場合は**ダブルクォート**で囲む（例：`"and"`）。
